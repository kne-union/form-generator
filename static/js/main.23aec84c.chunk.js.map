{"version":3,"sources":["form-generator/Layout/style.module.scss","form-render/components/Img/style.module.scss","form-render/components/Container/style.module.scss","form-generator/WorkArea/style.module.scss","form-generator/context.js","form-generator/Layout/index.js","form-render/preset.js","form-render/components/Img/index.js","form-render/components/Word/index.js","form-render/components/Container/index.js","form-render/index.js","form-generator/ComponentList/index.js","form-generator/OptionList/SchemaForm.js","form-generator/WorkArea/useFieldOperation.js","form-generator/OptionList/index.js","form-generator/WorkArea/ActiveObject.js","form-generator/WorkArea/index.js","form-generator/index.js","App.js","reportWebVitals.js","react-form/context.js","react-form/useEmitter.js","react-form/useEvent.js","react-form/group.js","test/index.js","index.js","form-generator/OptionList/style.module.scss","form-generator/ComponentList/style.module.scss"],"names":["module","exports","context","createContext","Provider","Consumer","useAppContext","useContext","Header","Layout","Footer","Sider","Content","PageLayout","left","right","children","activeId","className","style","theme","width","config","componentsConfig","fields","rules","field","getConfig","_getComponentMap","memoize","output","forEach","item","fieldName","getComponentMap","Img","url","mod","alt","classnames","src","Word","props","Container","mode","renderFields","Object","assign","Form","SubmitButton","ResetButton","Col","Row","ComponentMap","FormRender","renderChildren","useCallback","target","parentId","data","fieldList","list","filter","length","map","id","styleProps","Component","fieldConfig","defaultProps","schemaProps","_get","keys","name","defaultFormFieldProps","hasOwnProperty","label","title","classNameProps","outerClassName","componentStyleProps","omit","childrenProps","computedProps","ComponentList","compositeItems","saveCompositeItems","delCompositeItem","listRender","defaultCompositeItems","concat","type","isCustom","con","chunk","hidden","index","gutter","span","draggable","onDragStart","e","dataTransfer","setData","JSON","stringify","CloseOutlined","onClick","direction","GroupList","Group","useGroup","DelButton","onRemove","shape","size","ItemList","schema","items","groupRef","useRef","useMemo","renderSchemaFormField","justify","icon","PlusOutlined","current","onAdd","ref","groupKey","AnyOfField","useFieldInfo","targetSchema","find","AnyOf","schemaAnyOf","anyOf","options","value","placeholder","Array","isArray","enum","str","defaultValue","properties","useFieldOperation","setFieldList","setActiveId","toSuper","toRoot","toFirstChild","up","oldList","slice","findIndex","targetIndex","findLastIndex","targetItem","down","splice","del","removeChildren","indexOf","save","modal","FormModal","content","rule","formProps","result","msg","onSubmit","targetList","findChildren","depth","push","destroy","TabPane","Tabs","useFormData","propsName","formRef","useEffect","sub","sub2","activeItem","schemaProperties","emitter","addListener","SymbolIndex","newItem","fieldItem","formState","groupName","newFieldList","groupIndex","remove","FieldOptions","description","FormOptions","formConfig","StyleOptions","commonStyleConfig","Panel","fieldOperation","EnterOutlined","rotate","ArrowUpOutlined","ArrowDownOutlined","DeleteOutlined","SaveOutlined","OptionList","isField","defaultActiveKey","tab","forceRender","ActiveObject","open","outerRef","useState","setTargetList","handler","document","body","keyCode","preventDefault","addEventListener","removeEventListener","currentActive","computedTargetList","outer","outerRect","getBoundingClientRect","documentElement","scrollLeft","top","scrollTop","sort","a","b","rect","querySelector","targetRect","height","Math","round","findTarget","childCheck","clickLeft","clientX","clickTop","clientY","hasChildNodes","onResize","onDragOver","onDrop","stopPropagation","transferData","parse","getData","newId","uniqueId","oldData","idsMap","WorkArea","exportData","includeData","setOpen","console","log","checked","onChange","then","FormGenerator","Promise","resolve","IS_JSON","errMsg","onCancel","Modal","info","TextArea","readOnly","rows","okText","warn","getCompositeItems","window","localStorage","getItem","App","setList","nextUUId","setItem","getUUId","newList","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","useFormContext","useEmitter","fbemitter","EventEmitter","forwardRef","initDataRef","createGroupIndex","setGroupList","range","get","sub1","addHandler","emit","removeHandler","useImperativeHandle","ReactDOM","render","getElementById"],"mappings":"2GACAA,EAAOC,QAAU,CAAC,KAAO,oBAAoB,KAAO,sB,oBCApDD,EAAOC,QAAU,CAAC,IAAM,mBAAmB,WAAW,0B,oBCAtDD,EAAOC,QAAU,CAAC,UAAY,yBAAyB,kBAAkB,iC,2vaCAzED,EAAOC,QAAU,CAAC,IAAM,mBAAmB,OAAS,sBAAsB,aAAa,0BAA0B,UAAU,uBAAuB,cAAc,2BAA2B,KAAO,oBAAoB,IAAM,mBAAmB,KAAO,oBAAoB,UAAU,uBAAuB,OAAS,sBAAsB,KAAO,sB,uHCC3UC,EAAUC,wBAAc,IAENC,GAAYF,EAAtBG,SAAsBH,EAAZE,UAIXE,EAAgB,WACzB,OAAOC,qBAAWL,ICJfM,EAAkCC,IAAlCD,OAAQE,EAA0BD,IAA1BC,OAAQC,EAAkBF,IAAlBE,MAAOC,EAAWH,IAAXG,QAefC,EAbI,SAAC,GAA6B,IAA5BC,EAA2B,EAA3BA,KAAMC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,SACvBC,EAAYX,IAAZW,SACP,OAAO,eAAC,IAAD,CAAQC,UAAWC,IAAK,KAAxB,UACH,cAACX,EAAD,qBACA,eAAC,IAAD,CAAQU,UAAWC,IAAK,KAAxB,UACI,cAACR,EAAD,CAAOS,MAAM,QAAb,SAAsBN,IACtB,cAACF,EAAD,UAAUI,IACTC,EAAW,cAACN,EAAD,CAAOS,MAAM,QAAQC,MAAO,IAA5B,SAAkCN,IAAiB,QAEnE,cAACL,EAAD,yB,iICXJY,G,OAAS,CAACC,mBAAkBC,WAAQC,MAAO,GAAIC,MAAO,KAY7CC,EAAY,WACrB,OAAOL,GAILM,EAAmBC,KAAQ,SAACN,GAC9B,IAAMO,EAAS,GAMf,OALAP,EAAiBQ,SAAQ,YAAgB,EAAdf,SACde,SAAQ,SAACC,GACdF,EAAOE,EAAKC,WAAaD,QAG1BF,KAGEI,EAAkB,WAC3B,OAAON,EAAiBD,IAAYJ,mB,kCCvBzBY,EANH,SAAC,GAAgC,IAA/BjB,EAA8B,EAA9BA,UAAWkB,EAAmB,EAAnBA,IAAKC,EAAc,EAAdA,IAAKC,EAAS,EAATA,IAC/B,OAAO,qBAAKpB,UAAWqB,IAAWpB,IAAK,IAAQ,kBAAmBD,EAAjC,eAC5BC,IAAM,YAAsB,UAARkB,IACrBG,IAAKJ,EAAKE,IAAKA,K,QCARG,EAJF,SAAC,GAAqC,IAApCvB,EAAmC,EAAnCA,UAAWF,EAAwB,EAAxBA,SAAa0B,EAAW,wCAC9C,OAAO,gDAAUA,GAAV,IAAiBxB,UAAWqB,IAAWrB,EAAU,oBAAjD,SAAuEF,M,kBCQnE2B,EAPG,SAAC,GAA2C,IAA1C3B,EAAyC,EAAzCA,SAAU4B,EAA+B,EAA/BA,KAAM1B,EAAyB,EAAzBA,UAAcwB,EAAW,+CACzD,OAAO,6CACHxB,UAAWqB,IAAWrB,EAAW,wBAAyBC,IAAK,UAA1C,eAChBA,IAAM,mBAA8B,iBAATyB,KACxBF,GAHL,aAGa1B,MCEjBQ,EAAUG,IAAVH,OACDqB,EAAeC,OAAOC,OAAO,GAAI,CAACZ,MAAKM,OAAME,YAAWK,SAAMC,iBAAcC,gBAAaC,QAAKC,SAAM5B,GACpG6B,EAAenB,IAgENoB,EA9DI,SAACZ,GAChB,IAAMa,EAAiBC,uBAAY,YAAqD,IAAzCC,EAAwC,EAAlDC,SAA6BC,EAAqB,EAAhCC,UAAiB1C,EAAe,EAAfA,UAC9D2C,EAAOF,EAAKG,QAAO,qBAAEJ,WAA2BD,KACtD,OAAoB,IAAhBI,EAAKE,OACE,KAEJF,EAAKG,KAAI,YAAyC,IAAvCC,EAAsC,EAAtCA,GAAIhC,EAAkC,EAAlCA,UAAWiC,EAAuB,EAAvBA,WAAYxB,EAAW,EAAXA,MACnCyB,EAAYtB,EAAaZ,GAEzBmC,EAAcf,EAAapB,GAE3BoC,EAAgB,WAClB,IAAMvC,EAAS,GACTwC,EAAcC,IAAKH,EAAD,gCAA+C,IAOvE,OANAtB,OAAO0B,KAAKF,GAAavC,SAAQ,SAAC0C,GAC9B,IAAMzC,EAAOuC,IAAKD,EAAaG,GAC3BzC,IACAF,EAAO2C,GAAQzC,EAAI,YAGpBF,EATW,GAYhB4C,EACGlD,EAAOmD,eAAe1C,GAGpB,CACHwC,KAAMR,EACNW,MAAOR,EAAYS,OAJZ,GAQTC,EAAc,eACfV,EAAYW,gBAAkB,YAAcxC,IAAWrB,EAAWgD,EAAWhD,UAAvB,aAAwC+C,KAG7Fe,EAAuB,WACzB,IAAMtC,EAAQuC,IAAKf,EAAY,CAAC,cAChC,OAAIpB,OAAO0B,KAAK9B,GAAOqB,OAAS,EACrB,CACH5C,MAAOuB,GAGR,GAPkB,GAUvB1B,EAAWuC,EAAe,CAC5BG,SAAUO,EACVL,UAAWD,IAGTuB,EAAgBlE,EAAW,CAACA,YAAY,GAExCmE,EAAgBrC,OAAOC,OAAO,GAAIsB,EAAcK,EAAuBhC,EAAOoC,EAAgBE,EAAqBE,GAEzH,OAAO,cAACf,EAAD,eAAwBgB,GAARlB,QAE5B,IACH,OAAOV,EAAeb,I,gDChEnBnB,GAAoBI,IAApBJ,iBA4CQ6D,GA1CO,WAAO,IAAD,EACuC9E,IAAxD+E,EADiB,EACjBA,eAAgBC,EADC,EACDA,mBAAoBC,EADnB,EACmBA,iBACrCC,EAAahC,uBAAY,WAC3B,MAAO,sBAAIjC,IAAJ,CAAsB,CACzBsD,MAAO,2BACP7D,SAAUyE,GAAsBC,OAAOL,EAAerB,KAAI,SAAChC,GAAD,OAAUc,OAAOC,OAAO,GAAIf,EAAM,CACxF2D,KAAM,QACNC,UAAU,WAEf5B,KAAI,YAAwB,IAAtBa,EAAqB,EAArBA,MAAO7D,EAAc,EAAdA,SACZ,OAAO,sBAAKE,UAAWC,KAAM0E,IAAtB,UACH,qBAAK3E,UAAWC,KAAM,aAAtB,SAAqC0D,IACpCiB,IAAM9E,EAAS8C,QAAO,mBAAyB,IAAzB,EAAEiC,UAA8B,GAAG/B,KAAI,SAAChC,EAAMgE,GAAP,OAAiB,cAAC,IAAD,CAC3E9E,UAAWC,KAAM,YAAa8E,OAAQ,CAAC,GAAI,IADgC,SAG1EjE,EAAKgC,KAAI,SAAChC,GAAU,IACV6C,EAAyD7C,EAAzD6C,MADS,EACgD7C,EAAlD2D,YADE,MACK,SADL,EACe3E,EAAiCgB,EAAjChB,SAAUiB,EAAuBD,EAAvBC,UAAW2D,EAAY5D,EAAZ4D,SACpD,OAAO,cAAC,IAAD,CAAKM,KAAM,GAAX,SACH,sBAAKhF,UAAWC,KAAM,eAAgBgF,UAAU,OAAOC,YAAa,SAACC,GACjEA,EAAEC,aAAaC,QAAQ,OAAQC,KAAKC,UAAU,CAC1Cd,OACAhC,KAAe,WAATgC,EAAoB1D,EAAYjB,MAH9C,UAMI,qBAAKE,UAAWC,KAAM,qBAAtB,SACK0D,IAEJe,EAAW,cAACc,EAAA,EAAD,CAAexF,UAAWC,KAAM,aAAcwF,QAAS,WAC/DpB,EAAiBvD,MACd,SAZY6C,OAH1BmB,QAJ0BnB,QA0B5C,CAACQ,EAAgBC,IACpB,OAAO,cAAC,IAAD,CAAOsB,UAAU,WAAWzF,MAAO,CAACE,MAAO,QAA3C,SACFmE,O,gDC1CHqB,GAAYC,KAAMD,UAClBE,GAAWD,KAAMC,SAEjBC,GAAY,WAAO,IACdC,EAAYF,KAAZE,SACP,OAAO,cAAC,KAAD,CAAQC,MAAM,QAAQC,KAAK,QAAQR,QAASM,EAA5C,2BAILG,GAAW,SAAC,GAAoB,IAAnB3C,EAAkB,EAAlBA,KAAM4C,EAAY,EAAZA,OACfC,EAAQ/C,IAAK8C,EAAQ,QAAS,IAC9BE,EAAWC,iBAAO,MAClBxG,EAAWyG,mBAAQ,WACrB,OAAOC,GAAsB,CAACjD,OAAM4C,OAAQC,MAC7C,CAACA,EAAO7C,IACX,OAAO,qCACH,eAAC,IAAD,CAAKkD,QAAQ,gBAAb,UACI,cAAC,IAAD,UACI,sBAAMzG,UAAWC,KAAM,cAAvB,SAAuCkG,EAAOxC,UAElD,cAAC,IAAD,UACI,cAAC,KAAD,CAAQc,KAAK,UAAUuB,MAAM,QAAQC,KAAK,QAAQS,KAAM,cAACC,GAAA,EAAD,IAAiBlB,QAAS,WAC9EY,EAASO,QAAQC,gBAI7B,qBAAK7G,UAAWC,KAAM,YAAtB,SACI,cAAC0F,GAAD,CAAWmB,IAAKT,EAAU9C,KAAMA,EAAMwD,SAAU,SAACjG,EAAMgE,GAAP,OAAiBA,GAAjE,SACI,eAAC,IAAD,CAAO9E,UAAWC,KAAM,aAAxB,UACKH,EACD,cAAC,GAAD,eAOdkH,GAAa,SAAC,GAAoB,IAAnBzD,EAAkB,EAAlBA,KAAM4C,EAAY,EAAZA,OACjB7F,EAAS2G,eACTL,EAAUvD,IAAK/C,EAAD,YAAciD,EAAd,wBACd2D,EAAef,EAAOgB,MAAK,SAACrG,GAAD,OAAUA,EAAK2D,OAASmC,KACzD,OAAOL,mBAAQ,WACX,OAAMK,GAAWM,EAGV,qBAAKlH,UAAWC,KAAM,YAAtB,SACFuG,GAAsB,CAACjD,OAAM4C,OAAQe,MAH/B,OAKZ,CAAC3D,EAAMqD,EAASM,KAGjBE,GAAQ,SAAC,GAAoB,IAAnB7D,EAAkB,EAAlBA,KAAM4C,EAAY,EAAZA,OACZkB,EAAclB,EAAOmB,MACrBC,EAAUF,EAAYvE,KAAI,YAC5B,MAAO,CACHY,MAF2C,EAAjBC,MAG1B6D,MAH2C,EAAV/C,SAMzC,OAAO,qCACH,eAAC,IAAD,CAAKzE,UAAWC,KAAM,eAAgBwG,QAAQ,gBAA9C,UACI,cAAC,IAAD,UACI,sBAAMzG,UAAWC,KAAM,cAAvB,SAAuCkG,EAAOxC,OAASJ,MAE3D,cAAC,IAAD,UACI,cAAC,IAAD,CAAQ0C,KAAK,QAAQwB,YAAY,iCAAQlE,KAAI,UAAKA,EAAL,SAAkBgE,QAASA,SAGhF,cAAC,GAAD,CAAYhE,KAAMA,EAAM4C,OAAQkB,QAI3Bb,GAAwB,SAAxBA,EAAyB,GAAoB,IAAnBjD,EAAkB,EAAlBA,KAAM4C,EAAY,EAAZA,OACzC,OAAQA,EAAO1B,MACX,IAAK,SACD,OAAIiD,MAAMC,QAAQxB,EAAOyB,OAASzB,EAAOyB,KAAK/E,OAAS,EAC5C,cAAC,IAAD,CAAQoD,KAAK,QAAmB1C,KAAMA,EAAMG,MAAOyC,EAAOxC,OAASJ,EAC3DgE,QAASpB,EAAOyB,KAAK9E,KAAI,SAAC+E,GAAD,MAAU,CAC/BnE,MAAOmE,EAAKL,MAAOK,MAClBC,aAAc3B,EAAM,SAHP5C,GAK9B,cAAC,IAAD,CAAO0C,KAAK,QAAmBxB,KAAK,OAAOlB,KAAMA,EAAMG,MAAOyC,EAAOxC,OAASJ,EACvEuE,aAAc3B,EAAM,SADF5C,GAEpC,IAAK,UACD,OAAO,cAAC,IAAD,CAAQ0C,KAAK,QAAmB1C,KAAMA,EAAMG,MAAOyC,EAAOxC,OAASJ,EAC3DuE,aAAc3B,EAAM,SADF5C,GAErC,IAAK,SACL,IAAK,UACD,OAAO,cAAC,IAAD,CAAa0C,KAAK,QAAmB1C,KAAMA,EAAMG,MAAOyC,EAAOxC,OAASJ,EAC3DuE,aAAc3B,EAAM,SADF5C,GAE1C,IAAK,SACD,IAAMwE,EAAa1E,IAAK8C,EAAQ,aAAc,IAC9C,OAAOvE,OAAO0B,KAAKyE,GAAYjF,KAAI,SAACS,GAChC,OAAOiD,EAAsB,CAACjD,OAAM4C,OAAQ4B,EAAWxE,QAE/D,IAAK,QACD,OAAO,cAAC,GAAD,CAAqBA,KAAMA,EAAM4C,OAAQA,GAA1B5C,GAC1B,QACI,OAAI4C,EAAOmB,MACA,cAAC,GAAD,CAAkB/D,KAAMA,EAAM4C,OAAQA,GAA1B5C,GAEhB,O,8DC+BJyE,GArIW,WAAO,IAAD,EACiE5I,IAAtF6I,EADqB,EACrBA,aAAcvF,EADO,EACPA,UAAW3C,EADJ,EACIA,SAAUmI,EADd,EACcA,YAAa9D,EAD3B,EAC2BA,mBAAoBD,EAD/C,EAC+CA,eACrEgE,EAAU7F,uBAAY,WACnBvC,GAAyB,SAAbA,GAGjBmI,GAAY,SAACnI,GACT,IAAMe,EAAO4B,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,KAClD,OAAIe,GAAQA,EAAK0B,SACN1B,EAAK0B,SAETzC,OAEZ,CAACA,EAAUmI,EAAaxF,IACrB0F,EAAS9F,uBAAY,WACvB4F,EAAY,UACb,CAACA,IACEG,EAAe/F,uBAAY,WACxBvC,GAGLmI,GAAY,SAACnI,GACT,IAAMe,EAAO4B,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAK0B,WAAazC,KACxD,OAAIe,EACOA,EAAKiC,GAEThD,OAEZ,CAACA,EAAUmI,EAAaxF,IACrB4F,EAAKhG,uBAAY,WACdvC,GAAyB,SAAbA,GAGjBkI,GAAa,SAACM,GACV,IAAM5F,EAAO4F,EAAQC,MAAM,GACrB1D,EAAQnC,EAAK8F,WAAU,SAAC3H,GAAD,OAAUA,EAAKiC,KAAOhD,KAC7C2I,EAAcC,KAAchG,EAAK6F,MAAM,EAAG1D,IAAQ,SAAChE,GAAD,OAAUA,EAAK0B,WAAaG,EAAKmC,GAAOtC,YAChG,GAAIsC,GAAS,GAAK4D,GAAe,EAAG,CAChC,IAAME,EAAajG,EAAK+F,GACxB/F,EAAK+F,GAAe/F,EAAKmC,GACzBnC,EAAKmC,GAAS8D,EAElB,OAAOjG,OAEZ,CAAC5C,EAAUkI,IACRY,EAAOvG,uBAAY,WAChBvC,GAAyB,SAAbA,GAGjBkI,GAAa,SAACM,GACV,IAAM5F,EAAO4F,EAAQC,MAAM,GACrB1D,EAAQnC,EAAK8F,WAAU,SAAC3H,GAAD,OAAUA,EAAKiC,KAAOhD,KAC7C2I,EAAcD,KAAU9F,EAAK6F,MAAM1D,EAAQ,IAAI,SAAChE,GAAD,OAAUA,EAAK0B,WAAaG,EAAKmC,GAAOtC,YAC7F,GAAIsC,GAAS,GAAK4D,GAAe,EAAG,CAChC,IAAM5H,EAAO6B,EAAKmC,GAClBnC,EAAKmG,OAAOhE,EAAO,GACnBnC,EAAKmG,OAAOhE,EAAQ,EAAG,EAAGhE,GAG9B,OAAO6B,OAEZ,CAAC5C,EAAUkI,IACRc,EAAMzG,uBAAY,WACfvC,GAAyB,SAAbA,IAGjBmI,EAAY,MAEZD,GAAa,SAACM,GACV,IAAM5F,EAAO4F,EAAQC,MAAM,GACrB1D,EAAQnC,EAAK8F,WAAU,SAAC3H,GAAD,OAAUA,EAAKiC,KAAOhD,KAYnD,OAJI+E,GAAS,IACTnC,EAAKmG,OAAOhE,EAAO,GARA,SAAjBkE,EAAkBjG,GACCJ,EAAKC,QAAO,SAAC9B,GAAD,OAAUA,EAAK0B,WAAaO,KAChDlC,SAAQ,SAACC,GAClB6B,EAAKmG,OAAOnG,EAAKsG,QAAQnI,GAAO,GAChCkI,EAAelI,EAAKiC,OAKxBiG,CAAejJ,IAEZ4C,QAEZ,CAAC5C,EAAUmI,EAAaD,IACrBiB,EAAO5G,uBAAY,WACrB,IAAM6G,EAAQC,IAAUD,MAAM,CAC1BxF,MAAO,uCACP0F,QAAS,cAAC,IAAD,CAAO9F,KAAK,YAAYG,MAAM,qBAAM4F,KAAK,0BAClDC,UAAW,CACPhJ,MAAO,CACH,SAAY,SAACiH,GACT,OAAMrD,EAAegD,MAAK,SAACrG,GAAD,OAAUA,EAAK6C,QAAU6D,KACxC,CAACgC,QAAQ,EAAOC,IAAK,4DAEzB,CAACD,QAAQ,KAGxBE,SAAU,SAACjH,GACP,IAAMkH,EAAa,IACE,SAAfC,EAAgB7G,EAAI8G,GACtB,IAAMjD,EAAUlE,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOA,KAC/CjD,EAAW4C,EAAUE,QAAO,SAAC9B,GAAD,OAAUA,EAAK0B,WAAaO,KAC9D4G,EAAWG,KAAKlI,OAAOC,OAAO,GAAI+E,EAAS,CAACiD,WACxC/J,EAAS+C,OAAS,GAClB/C,EAASe,SAAQ,SAACC,GACd8I,EAAa9I,EAAKiC,GAAI8G,EAAQ,MAI1CD,CAAa7J,EAAU,GACvB,IAAM2I,EAAciB,EAAWlB,WAAU,qBAAE1F,KAAehD,KAC1D4J,EAAWjB,GAAalG,SAAW,OACnC4B,EAAmB,CACfT,MAAOlB,EAAK1B,UACZjB,SAAU6J,IAEdR,EAAMY,gBAInB,CAAChK,EAAU2C,EAAWyB,EAAgBC,IACzC,OAAOmC,mBAAQ,iBAAO,CAClB6B,SACAD,UACAE,eACAC,KACAO,OACAE,MACAG,UACA,CAACd,EAAQD,EAASE,EAAcC,EAAIO,EAAME,EAAKG,K,sEC5HhD5I,GAAUG,IAAVH,OACD6B,GAAenB,IACdgJ,GAAWC,KAAXD,QAEDE,GAAc,SAAC/D,GAAiC,IAAzBgE,EAAwB,uDAAZ,QAAY,EACL/K,IAArCsD,EAD0C,EAC1CA,UAAWuF,EAD+B,EAC/BA,aAAclI,EADiB,EACjBA,SAC1BqK,EAAU9D,iBAAO,MAqEvB,OApEA+D,qBAAU,WACN,IAAIC,EAAKC,EACT,GAAIxK,EAAU,CACV,IAAMyK,EAAa9H,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,KAClD0K,EAAmBpH,IAAK8C,EAAQ,aAAc,IAC9ChD,EAAe,GACrBvB,OAAO0B,KAAKmH,GAAkB5J,SAAQ,SAAC0C,GACnCJ,EAAaI,GAAQkH,EAAiBlH,GAAjB,WAErBiH,GAAcJ,EAAQxD,UACtBwD,EAAQxD,QAAQnE,KAAOb,OAAOC,OAAO,GAAIsB,EAAc,CACnDI,KAAMiH,EAAWzH,GACjBW,MAAOvB,GAAaqI,EAAWzJ,WAAW4C,OAC3CyG,EAAQxD,QAAQnE,KAAMY,IAAKmH,EAAYL,KAE9CG,EAAMF,EAAQxD,QAAQ8D,QAAQC,YAAY,gCAAgC,YAAwC,IAAtCpH,EAAqC,EAArCA,KAAaqH,EAAwB,EAA/B9F,MAAoB0C,EAAW,EAAXA,MAClGS,GAAa,SAACvF,GACV,IAAM8H,EAAa9H,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,KAClD+E,EAAQpC,EAAUuG,QAAQuB,GAC1BK,EAAUjJ,OAAOC,OAAO,GAAI2I,EAAlB5I,OAAA,IAAAA,CAAA,GACXuI,EAAYvI,OAAOC,OAAO,GAAI2I,EAAWL,GAAa,WACnD,IAAMW,EAAYzH,IAAK+G,EAAQxD,QAAQmE,UAAjB,UAA+BxH,EAA/B,SAA4C,IAAIqH,GACtE,GAAIE,EAAUE,WAAazH,IAASuH,EAAUE,UAAW,CACrD,IACMzI,EADac,IAAK+G,EAAQxD,QAAQnE,KAAjB,UAA0BqI,EAAUE,WAAa,IAC9CxC,MAAM,GAEhC,OADAjG,EAAOuI,EAAUhG,OAAS0C,EACnB,eAAEsD,EAAUE,UAAYzI,GAEnC,GAAIuI,EAAUE,UAAW,CACrB,IACMzI,EADac,IAAK+G,EAAQxD,QAAQnE,KAAjB,UAA0BqI,EAAUE,WAAa,IAC9CxC,MAAM,GAEhC,OADAjG,EAAOuI,EAAUhG,OAASlD,OAAOC,OAAO,GAAIU,EAAOuI,EAAUhG,OAAnClD,OAAA,IAAAA,CAAA,GAA6C2B,EAAOiE,IACvE,eAAEsD,EAAUE,UAAYzI,GAEnC,OAAO,eAAEgB,EAAOiE,GAdmC,MAkBrDyD,EAAevI,EAAU8F,MAAM,GACrCyC,EAAanC,OAAOhE,EAAO,EAAG+F,GAC9B5C,EAAagD,SAIrBV,EAAOH,EAAQxD,QAAQ8D,QAAQC,YAAY,qBAAqB,YAAgC,IAAvBO,EAAsB,EAA7BpG,MAAmBvB,EAAU,EAAVA,KACjF0E,GAAa,SAACvF,GACV,IAAM8H,EAAa9H,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,KAClD+E,EAAQpC,EAAUuG,QAAQuB,GAC1BK,EAAUjJ,OAAOC,OAAO,GAAI2I,EAAlB5I,OAAA,IAAAA,CAAA,GACXuI,EAAYvI,OAAOC,OAAO,GAAI2I,EAAWL,GAAa,WACnD,IACM5H,GADac,IAAK+G,EAAQxD,QAAQnE,KAAjB,UAA0Bc,KAAW,IAClCiF,MAAM,GAEhC,OADAjG,EAAOuG,OAAOoC,EAAY,GACnB,eAAE3H,EAAOhB,GAJmC,MAQrD0I,EAAevI,EAAU8F,MAAM,GACrCyC,EAAanC,OAAOhE,EAAO,EAAG+F,GAC9B5C,EAAagD,SAIzB,OAAO,WACHX,GAAOA,EAAIa,SACXZ,GAAQA,EAAKY,YAElB,CAACzI,EAAWyD,EAAQgE,EAAWpK,EAAUkI,IACrCmC,GAGLgB,GAAe,WAAO,IAAD,EACOhM,IAAvBsD,EADgB,EAChBA,UAAW3C,EADK,EACLA,SACZoG,EAASI,mBAAQ,WACnB,IAAMiE,EAAa9H,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,KACxD,OAAOsD,IAAKlB,GAAD,YAAoBkB,IAAKmH,EAAY,aAArC,kBAAmE,MAC/E,CAAC9H,EAAW3C,IACTqK,EAAUF,GAAY/D,GAC5B,OAAO,cAAC,IAAD,CAAMW,IAAKsD,EAAS3F,KAAK,QAAQwB,KAAK,QAAtC,SACqD,IAAvDrE,OAAO0B,KAAKD,IAAK8C,EAAQ,aAAc,KAAKtD,OACzC,cAAC,KAAD,CAAOwI,YAAY,KAAO7E,GAAsB,CAACL,cAIvDmF,GAAc,WAChB,IAAMlB,EAAUF,GAAYqB,IAC5B,OAAO,cAAC,IAAD,CAAMzE,IAAKsD,EAAS3F,KAAK,QAAQwB,KAAK,QAAtC,SACFO,GAAsB,CAACL,OAAQoF,QAIlCC,GAAe,WAAO,IAAD,EACOpM,IAAvBsD,EADgB,EAChBA,UAAW3C,EADK,EACLA,SACZoG,EAASI,mBAAQ,WACnB,IAAMiE,EAAa9H,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,KACxD,OAAO6B,OAAOC,OAAO,GAAI4J,GAAmBpI,IAAKlB,GAAD,YAAoBkB,IAAKmH,EAAY,aAArC,uBAAwE,OACzH,CAAC9H,EAAW3C,IACTqK,EAAUF,GAAY/D,EAAQ,cACpC,OAAO,cAAC,IAAD,CAAMW,IAAKsD,EAAS3F,KAAK,QAAQwB,KAAK,QAAtC,SACFO,GAAsB,CAACL,cAI1BuF,GAAQ,WAAO,IAAD,EACctM,IAAvBsD,EADS,EACTA,UAAW3C,EADF,EACEA,SACZe,EAAOyF,mBAAQ,kBAAM7D,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,OAAW,CAAC2C,EAAW3C,IACjF4L,EAAiB3D,KACvB,OAAKlH,EAGE,eAAC,IAAD,CAAOd,UAAWC,KAAK,MAAWyF,UAAW,WAAYzF,MAAO,CAACE,MAAO,QAAxE,UACH,eAAC,IAAD,CAAOH,UAAWC,KAAM,eAAxB,gBACQF,EADR,iBACsBoC,GAAarB,EAAKC,WAAW4C,MADnD,IAC2D7C,EAAK0B,SAAW,uDAAQ1B,EAAK0B,YAAe,QAEvG,eAAC,IAAD,CAAOxC,UAAWC,KAAM,cAAxB,UACI,iDACA,+BACiB,SAAZa,EAAKiC,GACF,cAAC,KAAD,CAAQ0B,KAAK,OAAOiC,KAAM,cAACkF,GAAA,EAAD,CAAeC,QAAS,KAC1CpG,QAASkG,EAAetD,eAAkB,qCAC9C,cAAC,KAAD,CAAQ5D,KAAK,OAAOiC,KAAM,cAACkF,GAAA,EAAD,CAAeC,OAAQ,KAAOpG,QAASkG,EAAexD,UAChF,cAAC,KAAD,CAAQ1D,KAAK,OAAOiC,KAAM,cAACkF,GAAA,EAAD,CAAeC,QAAS,KAAOpG,QAASkG,EAAetD,eACjF,cAAC,KAAD,CAAQ5D,KAAK,OAAOiC,KAAM,cAACoF,GAAA,EAAD,IAAoBrG,QAASkG,EAAerD,KACtE,cAAC,KAAD,CAAQ7D,KAAK,OAAOiC,KAAM,cAACqF,GAAA,EAAD,IAAsBtG,QAASkG,EAAe9C,OACxE,cAAC,KAAD,CAAQpE,KAAK,OAAOiC,KAAM,cAACsF,GAAA,EAAD,IAAmBvG,QAASkG,EAAe5C,MACrE,cAAC,KAAD,CAAQtE,KAAK,OAAOiC,KAAM,cAACuF,GAAA,EAAD,IAAiBxG,QAASkG,EAAezC,kBAjB5E,MAsDAgD,GA9BI,WAAO,IAAD,EACS9M,IAAvBW,EADc,EACdA,SAAU2C,EADI,EACJA,UACXyJ,EAAU5F,mBAAQ,WACpB,IAAMiE,EAAa9H,EAAUyE,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,KACxD,QAAKyK,GAGElK,GAAOmD,eAAe+G,EAAWzJ,aACzC,CAAChB,EAAU2C,IACd,OAAK3C,EAID,eAAC,IAAD,CAAO2F,UAAW,WAAYzF,MAAO,CAACE,MAAO,QAA7C,UACI,cAAC,GAAD,IACA,eAAC,KAAD,CAAMH,UAAWC,KAAK,IAASmM,iBAAiB,IAAhD,UACI,cAACpC,GAAD,CAASqC,IAAI,2BAAeC,aAAW,EAAvC,SACI,cAAC,GAAD,KADoB,KAGvBH,EAAU,cAACnC,GAAD,CAASqC,IAAI,2BAAeC,aAAW,EAAvC,SACP,cAAC,GAAD,KAD+B,KAEtB,KACb,cAACtC,GAAD,CAASqC,IAAI,2BAAeC,aAAW,EAAvC,SACI,cAAC,GAAD,KADoB,WAZzB,M,+ECxJTnK,GAAenB,IAiMNuL,GA/LM,SAAC,GAAsB,IAArBC,EAAoB,EAApBA,KAAM1M,EAAc,EAAdA,SAAc,EACkBV,IAAlDsD,EADgC,EAChCA,UAAWuF,EADqB,EACrBA,aAAclI,EADO,EACPA,SAAUmI,EADH,EACGA,YACpCuE,EAAWnG,iBAAO,MAFe,EAGHoG,mBAAS,IAHN,mBAGhC/C,EAHgC,KAGpBgD,EAHoB,KAIjChB,EAAiB3D,KACvBqC,qBAAU,WACN,IAAMuC,EAAU,SAACzH,GACTA,EAAE5C,SAAWsK,SAASC,MAGtB/M,IACkB,KAAdoF,EAAE4H,UACF5H,EAAE6H,iBACFrB,EAAevD,UAED,KAAdjD,EAAE4H,UACF5H,EAAE6H,iBACFrB,EAAexD,WAED,KAAdhD,EAAE4H,UACF5H,EAAE6H,iBACFrB,EAAerD,MAED,KAAdnD,EAAE4H,UACF5H,EAAE6H,iBACFrB,EAAetD,gBAED,KAAdlD,EAAE4H,UACF5H,EAAE6H,iBACFrB,EAAe9C,QAGD,IAAd1D,EAAE4H,UACF5H,EAAE6H,iBACFrB,EAAe5C,SAK3B,OADA8D,SAASI,iBAAiB,UAAWL,GAC9B,WACHC,SAASK,oBAAoB,UAAWN,MAE7C,CAAC7M,EAAU4L,IACd,IAAMwB,EAAgB5G,mBAAQ,WAC1B,GAAKxG,EAGL,OAAO4J,EAAWxC,MAAK,SAACrG,GAAD,OAAUA,EAAKiC,KAAOhD,OAC9C,CAACA,EAAU4J,IACRyD,EAAqB9K,uBAAY,WACnC,IAAM+K,EAAQZ,EAAS7F,QACjB0G,EAAYD,EAAME,wBAClB3N,EAAO0N,EAAU1N,KAAOiN,SAASW,gBAAgBC,WACjDC,EAAMJ,EAAUI,IAAMb,SAASW,gBAAgBG,UAC/C/M,EAAS8B,EAAU8F,MAAM,GAAGoF,MAAK,SAACC,EAAGC,GACvC,OAAOA,EAAEjE,MAAQgE,EAAEhE,SACpB/G,KAAI,YAA6B,IAA3BC,EAA0B,EAA1BA,GAAI8G,EAAsB,EAAtBA,MAAO9I,EAAe,EAAfA,UAEVgN,EADYV,EAAMW,cAAN,cAA2BjL,IACtBwK,wBACjBU,EAAa,CACfrO,KAAMmO,EAAKnO,KAAOiN,SAASW,gBAAgBC,WAC3CC,IAAKK,EAAKL,IAAMb,SAASW,gBAAgBG,UACzCxN,MAAO4N,EAAK5N,MACZ+N,OAAQH,EAAKG,QAEjB,MAAO,CACHnL,KACAhC,YACA4C,MAAOxB,GAAapB,GAAW4C,MAC/BkG,QACA6D,IAAKS,KAAKC,MAAMH,EAAWP,IAAMA,GACjC9N,KAAMuO,KAAKC,MAAMH,EAAWrO,KAAOA,GACnCO,MAAOgO,KAAKC,MAAMH,EAAW9N,OAC7B+N,OAAQC,KAAKC,MAAMH,EAAWC,QAC9Bb,MAAO,CAACzN,OAAM8N,MAAKvN,MAAOmN,EAAUnN,MAAO+N,OAAQZ,EAAUY,YAGrEvB,EAAc/L,KACf,CAAC8B,IAEE2L,EAAa/L,uBAAY,SAAC6C,GAA2B,IAAxBmJ,EAAuB,wDACtD,OAAO3E,EAAWxC,MAAK,YAAmD,IAAjDpG,EAAgD,EAAhDA,UAAWnB,EAAqC,EAArCA,KAAM8N,EAA+B,EAA/BA,IAAKvN,EAA0B,EAA1BA,MAAO+N,EAAmB,EAAnBA,OAAQb,EAAW,EAAXA,MACpDkB,EAAYpJ,EAAEqJ,QAAU3B,SAASW,gBAAgBC,WAAaJ,EAAMzN,KACtE6O,EAAWtJ,EAAEuJ,QAAU7B,SAASW,gBAAgBG,UAAYN,EAAMK,IACtE,OAAOa,EAAY3O,GAAQ2O,EAAY3O,EAAOO,GAASsO,EAAWf,GAAOe,EAAWf,EAAMQ,KAAYI,GAAcnM,GAAapB,GAAW4N,oBAEjJ,CAAChF,IAIJ,OAHAU,qBAAU,WACN+C,MACD,CAACA,IACG,cAAC,KAAD,CAAgBwB,SAAU,WAC7BxB,KADG,SAGH,sBAAKpN,UAAWqB,IAAWpB,KAAM,cAAP,eACrBA,KAAM,WAAauM,IACpB1F,IAAK2F,EAFT,UAGK3M,EACA0M,EAAO,qBAAKxM,UAAWC,KAAM,eAAgBwF,QAAS,SAACN,GACpDA,EAAE6H,iBACF,IAAMzK,EAAS8L,EAAWlJ,GAC1B,GAAI5C,EAAQ,CACR,GAAIA,EAAOQ,KAAOhD,EAEd,YADAmI,EAAY,MAGhBA,EAAY3F,EAAOQ,MAExB8L,WAAY,SAAC1J,GACZA,EAAE6H,kBACH8B,OAAQ,SAAC3J,GACR,IAAM5C,EAAS8L,EAAWlJ,GAAG,GAC7B,GAAI5C,IAA2D,IAAjDJ,GAAaI,EAAOxB,WAAW4N,cAAwB,CACjExJ,EAAE4J,kBACF,IAAMC,EAAe1J,KAAK2J,MAAM9J,EAAEC,aAAa8J,QAAQ,SACvD,GAA0B,WAAtBF,EAAavK,KAAmB,CAChC,IAAM1D,EAAYiO,EAAavM,KACzB0M,EAAQC,KAAS,GAAD,OAAIrO,EAAJ,MACtBkH,GAAa,SAACoH,GAAD,4BAAiBA,GAAjB,CAA0B,CACnCtM,GAAIoM,EACJ3M,SAAUD,EAAOQ,GACjBhC,YACA8I,MAAOtH,EAAOsH,MAAQ,EACtBrI,OTlGA+B,ESkGmBxC,ETjGlCN,IAAYH,OAAOiD,GSiG4B,CAC5BG,MAAOvB,GAAapB,GAAW4C,MAC/BJ,KAAM4L,GACN,IACJnM,WAAY,MTtGb,IAACO,SSwGD,CACH,IAAM+L,EAAS,GACfN,EAAavM,KAAK5B,SAAQ,SAACC,GACvBwO,EAAOxO,EAAKiC,IAAMqM,KAAS,GAAD,OAAItO,EAAKC,UAAT,SAE9BkH,GAAa,SAACoH,GAAD,4BAAiBA,GAAjB,YAA6BL,EAAavM,KAAKK,KAAI,SAAChC,GAS7D,MARsB,SAAlBA,EAAK0B,UACL1B,EAAK0B,SAAWD,EAAOQ,GACvBjC,EAAK+I,MAAQtH,EAAOsH,MAAQ,IAE5B/I,EAAK0B,SAAW8M,EAAOxO,EAAK0B,UAC5B1B,EAAK+I,MAAQ/I,EAAK+I,MAAQtH,EAAOsH,OAErC/I,EAAKiC,GAAKuM,EAAOxO,EAAKiC,IACfjC,aA7Cf,SAkDHf,GAAYoN,EAAgB,sBAAKnN,UAAWqB,IAAWpB,KAAK,QAAaA,MAAO,CAC7EyN,IAAKP,EAAcO,IACnB9N,KAAMuN,EAAcvN,KACpBO,MAAOgN,EAAchN,MACrB+N,OAAQf,EAAce,QAJG,UAM7B,sBACIlO,UAAWC,KAAK,IADpB,SAC8BkN,EAAcxJ,QACxC,sBAAM3D,UAAWC,KAAK,KAAtB,SAAuD,SAArBkN,EAAcpK,GAC5C,cAAC6I,GAAA,EAAD,CAAeC,QAAS,GAAI7L,UAAWC,KAAM,WAAYwF,QAAS,SAACN,GAC/DA,EAAE4J,kBACFpD,EAAetD,kBACZ,qCACH,cAACuD,GAAA,EAAD,CAAeC,OAAQ,GAAI7L,UAAWC,KAAM,WAAYwF,QAAS,SAACN,GAC9DA,EAAE4J,kBACFpD,EAAexD,aAEnB,cAACyD,GAAA,EAAD,CAAeC,QAAS,GAAI7L,UAAWC,KAAM,WAAYwF,QAAS,SAACN,GAC/DA,EAAE4J,kBACFpD,EAAetD,kBAEnB,cAACyD,GAAA,EAAD,CAAiB9L,UAAWC,KAAM,WAAYwF,QAAS,SAACN,GACpDA,EAAE4J,kBACFpD,EAAerD,QAEnB,cAACyD,GAAA,EAAD,CAAmB/L,UAAWC,KAAM,WAAYwF,QAAS,SAACN,GACtDA,EAAE4J,kBACFpD,EAAe9C,UAEnB,cAACmD,GAAA,EAAD,CAAgBhM,UAAWC,KAAM,WAAYwF,QAAS,SAACN,GACnDA,EAAE4J,kBACFpD,EAAe5C,SAEnB,cAACkD,GAAA,EAAD,CAAcjM,UAAWC,KAAM,WAAYwF,QAAS,SAACN,GACjDA,EAAE4J,kBACFpD,EAAezC,kBAGtB,OACJ,WChJNqG,GA/CE,WAAO,IAAD,EACqDnQ,IAAjEsD,EADY,EACZA,UAAWuF,EADC,EACDA,aAAcC,EADb,EACaA,YAAasH,EAD1B,EAC0BA,WAAYC,EADtC,EACsCA,YADtC,EAEK/C,oBAAS,GAFd,mBAEZF,EAFY,KAENkD,EAFM,KAgBnB,OAbArF,qBAAU,WACNpC,EAAa,CAAC,CACVlF,GAAI,OACJhC,UAAW,OACX8I,MAAO,EACPrI,MAAO,CACHkI,SAAU,SAACjH,GACPkN,QAAQC,IAAInN,KAGpBO,WAAY,QAEjB,CAACiF,IACG,sBAAKjI,UAAWC,KAAK,IAArB,UACH,qBAAKD,UAAWC,KAAK,OAArB,SACI,eAAC,IAAD,CAAKwG,QAAQ,gBAAb,UACI,cAAC,IAAD,UACI,eAAC,IAAD,WACI,6DAAkB,cAAC,KAAD,CAAQoJ,SAAUrD,EAAMsD,SAAU,SAACtI,GACrDU,EAAY,MACZwH,GAASlI,WAIjB,cAAC,IAAD,UACI,eAAC,IAAD,WACI,cAAC,KAAD,CAAQxB,MAAM,QAAQvB,KAAK,UAAUwB,KAAK,QAAQR,QAAS,WACvDgK,IAAcM,MAAK,SAACpN,GAChBA,GAAQA,EAAKE,OAAS,GAAKoF,EAAatF,OAFhD,0BAKA,cAAC,KAAD,CAAQqD,MAAM,QAAQC,KAAK,QAAQR,QAAS,WACxC+J,EAAWlK,KAAKC,UAAU7C,KAD9B,oCAOhB,cAAC,GAAD,CAAc8J,KAAMA,EAApB,SACI,cAAC,EAAD,CAAY9J,UAAWA,EAAW1C,UAAWC,KAAK,aCxCxD+P,GAAgB,SAAC,GAAqF,IAApF7L,EAAmF,EAAnFA,eAAgBqL,EAAmE,EAAnEA,WAAYC,EAAuD,EAAvDA,YAAarL,EAA0C,EAA1CA,mBAAoBC,EAAsB,EAAtBA,iBAAsB,EACrEqI,mBAAS,IAD4D,mBAChGhK,EADgG,KACrFuF,EADqF,OAEvEyE,mBAAS,MAF8D,mBAEhG3M,EAFgG,KAEtFmI,EAFsF,KAGvG,OAAO,cAAChJ,EAAD,CACHsI,MAAO,CACHzH,WACAmI,cACAxF,YACAuF,eACAuH,aACAC,cACAtL,iBACAC,qBACAC,oBAVD,SAYH,cAAC9E,EAAD,CAAQK,KAAM,cAAC,GAAD,IAAkBC,MAAO,cAAC,GAAD,IAAvC,SACI,cAAC,GAAD,SAKZmQ,GAAc7M,aAAe,CACzBgB,eAAgB,GAChBsL,YAAa,WACT,OAAO,IAAIQ,SAAQ,SAACC,GAChB,IAAM/G,EAAQC,IAAUD,MAAM,CAC1BxF,MAAO,2BACP0F,QAAS,cAAC,IAAD,CAAU9F,KAAK,OAAOG,MAAM,2BAAO4F,KAAK,gBACjDC,UAAW,CACPhJ,MAAO,CACH4P,QAAS,SAAC1N,GACN,IAEI,OADA6C,KAAK2J,MAAMxM,GACJ,CAAC+G,QAAQ,GAClB,MAAOrE,GACL,MAAO,CAACqE,QAAQ,EAAO4G,OAAQ,uDAI3C1G,SAXO,YAWW,IAARjH,EAAO,EAAPA,KACNyN,EAAQ5K,KAAK2J,MAAMxM,IACnB0G,EAAMY,YAGdsG,SAnB0B,WAoBtBH,EAAQ,WAKxBV,WAAY,SAAC/M,GACT6N,KAAMC,KAAK,CACP5M,MAAO,2BACP0F,QAAS,cAAC,KAAMmH,SAAP,CAAgBhJ,MAAO/E,EAAMgO,UAAQ,EAACC,KAAM,IACrDC,OAAQ,kBAGhBvM,mBAAoB,WAChBuL,QAAQiB,KAAK,iGAEjBvM,iBAAkB,WACdsL,QAAQiB,KAAK,gGAINZ,UCtETa,I,OAAoB,kBAAMvL,KAAK2J,MAAM6B,OAAOC,aAAaC,QAAQ,oBAAsB,QA4B9EC,GApBH,WAAO,IAAD,EACUvE,mBAASmE,IADnB,mBACPlO,EADO,KACDuO,EADC,KAEd,OAAO,cAAC,GAAD,CAAe/M,eAAgBxB,EAAMyB,mBAAoB,SAACtD,GAC7DoQ,GAAQ,SAAC3I,GACLzH,EAAKiC,GAVD,WACZ,IAAMoO,GAAYL,OAAOC,aAAaC,QAAQ,2BAA6B,GAAK,EAEhF,OADAF,OAAOC,aAAaK,QAAQ,yBAA0BD,GAC/CA,EAOWE,GACV,IAAMC,EAAU/I,EAAQ/D,OAAO1D,GAE/B,OADAgQ,OAAOC,aAAaK,QAAQ,kBAAmB9L,KAAKC,UAAU+L,IACvDA,MAEZjN,iBAAkB,YAAc,IAAZV,EAAW,EAAXA,MACnBuN,GAAQ,SAAC3I,GACL,IAAMzD,EAAQyD,EAAQE,WAAU,SAAC3H,GAAD,OAAUA,EAAK6C,QAAUA,KACnD2N,EAAU/I,EAAQC,MAAM,GAG9B,OAFA8I,EAAQxI,OAAOhE,EAAO,GACtBgM,OAAOC,aAAaK,QAAQ,kBAAmB9L,KAAKC,UAAU+L,IACvDA,SCfJC,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB1B,MAAK,YAAkD,IAA/C2B,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCLRxS,I,cAAUC,wBAAc,KAIjB8S,IADyB/S,GAAvBE,SAAuBF,GAAbG,SACK,kBAAME,qBAAWL,M,qECChCgT,I,QCJUC,EAAjBC,a,4BDDW,WAEjB,OADoBH,KAAZrH,U,+BEIJ1L,GAAUC,0BAERC,GAAaF,GAAbE,SAEK2G,GAAW,WACtB,OAAOxG,qBAAWL,KAGP2G,GAAYwM,sBAAW,WAA+BrL,GAAS,IAArCvD,EAAoC,EAApCA,KAAMwD,EAA8B,EAA9BA,SAAUjH,EAAoB,EAApBA,SAAoB,EACjD4M,mBAAS,IADwC,mBAClE/J,EADkE,KAC5DuO,EAD4D,KAEnExG,EAAUsH,KACRI,EAAgBL,KAAhBK,YAEFC,EAAmB/P,uBAAY,WACnC,OAAO8M,KAAS,SAAD,OAAU7L,EAAV,QACd,CAACA,IAEE+O,EAAehQ,uBACnB,SAAAK,GACE,OAAO+E,MAAMC,QAAQhF,IAASuO,EAAQnK,EAAWpE,EAAKG,IAAIiE,GAAYwL,KAAM,EAAG5P,EAAKE,QAAQC,KAAI,kBAAMuP,UAExG,CAACtL,EAAUsL,IAGbhI,qBAAU,WACR+H,EAAYxL,SAAW0L,EAAaE,aAAIJ,EAAYxL,QAASrD,MAC5D,CAAC+O,EAAaF,EAAa7O,IAE9B8G,qBAAU,WACR,IAAMoI,EAAO/H,EAAQC,YAAY,mBAAmB,WAClDuG,EAAQ,OAEJ3G,EAAOG,EAAQC,YAAY,iBAAiB,YAAe,IAAZlI,EAAW,EAAXA,KACnD6P,EAAaE,aAAI/P,EAAMc,OAGzB,OAAO,WACLkP,GAAQA,EAAKtH,SACbZ,GAAQA,EAAKY,YAEd,CAACT,EAAQnH,EAAM+O,IAElB,IAAMI,EAAapQ,uBAAY,WAC7B4O,GAAQ,SAAA3I,GACN,IAAM+I,EAAU/I,EAAQC,MAAM,GAG9B,OAFA8I,EAAQxH,KAAKuI,KACb3H,EAAQiI,KAAK,iBAAkB,CAAE7N,MAAOwM,EAAQzO,OAAS,EAAGU,SACrD+N,OAER,CAACe,EAAkB3H,EAASnH,IAEzBqP,EAAgBtQ,uBACpB,SAAAwC,GACEoM,GAAQ,SAAA3I,GACN,IAAM+I,EAAU/I,EAAQC,MAAM,GACxBE,EAAc4I,EAAQrI,QAAQnE,GAGpC,OAFAwM,EAAQxI,OAAOJ,EAAa,GAC5BgC,EAAQiI,KAAK,oBAAqB,CAAE7N,MAAO4D,EAAanF,SACjD+N,OAGX,CAAC/N,EAAMmH,IAcT,OAXAmI,8BACE/L,GACA,WACE,MAAO,CACLD,MAAO6L,EACP3M,SAAU6M,KAGd,CAACF,EAAYE,IAGRjQ,EAAKG,KAAI,SAAAC,GACd,OACE,cAAC,GAAD,CACEQ,KAAMA,EAENsD,MAAO6L,EACP3M,SAAU,WACR6M,EAAc7P,IALlB,SAOGjD,GALIiD,SAWP6C,GAAQ,SAAC,GAAgD,IAA9CrC,EAA6C,EAA7CA,KAAMuB,EAAuC,EAAvCA,MAAO+B,EAAgC,EAAhCA,MAAOd,EAAyB,EAAzBA,SAAUjG,EAAe,EAAfA,SAC7C,OAAO,cAAC,GAAD,CAAU0H,MAAO,CAAEjE,OAAMuB,QAAO+B,QAAOd,YAAvC,SAAoDjG,KAG7D8F,GAAMC,SAAWA,GACjBD,GAAMD,UAAYA,GAEHC,U,0BCrGeA,GAAvBC,SAAuBD,GAAbD,UCIjBmN,IAASC,OACL,cAAC,GAAD,IACFlG,SAASmG,eAAe,SAM1BzB,M,mBCdAzS,EAAOC,QAAU,CAAC,IAAM,mBAAmB,MAAQ,qBAAqB,aAAa,0BAA0B,cAAc,2BAA2B,YAAY,yBAAyB,aAAa,0BAA0B,WAAW,wBAAwB,cAAc,6B,mBCArRD,EAAOC,QAAU,CAAC,IAAM,mBAAmB,YAAY,yBAAyB,WAAW,wBAAwB,cAAc,2BAA2B,oBAAoB,iCAAiC,YAAY,4B","file":"static/js/main.23aec84c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"style_main__1xT37\",\"body\":\"style_body__3rkwV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"style_img__TuJFl\",\"is-block\":\"style_is-block__2lrAB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"style_container__ufTtV\",\"is-inline-block\":\"style_is-inline-block__1q5aY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"con\":\"style_con__2jgso\",\"header\":\"style_header__XznRB\",\"form-outer\":\"style_form-outer__34Hz0\",\"is-open\":\"style_is-open__1UWRg\",\"active-area\":\"style_active-area__22v39\",\"open\":\"style_open__2xzk4\",\"tip\":\"style_tip__29BXO\",\"edit\":\"style_edit__UzHg3\",\"opt-btn\":\"style_opt-btn__2LL2v\",\"active\":\"style_active__72prY\",\"form\":\"style_form__2Boti\"};","import {createContext, useContext} from 'react';\n\nconst context = createContext({});\n\nexport const {Consumer, Provider} = context;\n\nexport default context;\n\nexport const useAppContext = () => {\n    return useContext(context);\n};","import React from 'react';\nimport {Layout} from 'antd';\nimport style from './style.module.scss';\nimport {useAppContext} from \"../context\";\n\nconst {Header, Footer, Sider, Content} = Layout;\n\nconst PageLayout = ({left, right, children}) => {\n    const {activeId} = useAppContext();\n    return <Layout className={style['main']}>\n        <Header>Header</Header>\n        <Layout className={style['body']}>\n            <Sider theme=\"light\">{left}</Sider>\n            <Content>{children}</Content>\n            {activeId ? <Sider theme=\"light\" width={320}>{right}</Sider> : null}\n        </Layout>\n        <Footer>Footer</Footer>\n    </Layout>\n};\n\nexport default PageLayout;","import componentsConfig from './config.json';\nimport memoize from 'lodash/memoize';\nimport {fields, preset as formPreset} from '@kne/react-form-antd';\nimport '@kne/react-form-antd/dist/style.scss';\n\nlet config = {componentsConfig, fields, rules: {}, field: {}};\n\nconst preset = (callback) => {\n    config = callback(Object.assign({}, config));\n    formPreset({\n        rules: config.rules,\n        field: config.field\n    });\n};\n\nexport default preset;\n\nexport const getConfig = () => {\n    return config;\n};\n\n\nconst _getComponentMap = memoize((componentsConfig) => {\n    const output = {};\n    componentsConfig.forEach(({children}) => {\n        children.forEach((item) => {\n            output[item.fieldName] = item;\n        });\n    });\n    return output;\n});\n\nexport const getComponentMap = () => {\n    return _getComponentMap(getConfig().componentsConfig);\n};\n\nexport const isFormField = (name) => {\n    return !!getConfig().fields[name];\n}","import React from 'react';\nimport classnames from 'classnames';\nimport style from './style.module.scss';\n\nconst Img = ({className, url, mod, alt}) => {\n    return <img className={classnames(style['img'],'form-render_img', className, {\n        [style['is-block']]: mod === 'block'\n    })} src={url} alt={alt}/>\n};\n\nexport default Img;","import React from 'react';\nimport classnames from 'classnames';\n\nconst Word = ({className, children, ...props}) => {\n    return <span {...props} className={classnames(className,'form-render_word')}>{children}</span>\n};\n\nexport default Word;","import React from 'react';\nimport classnames from 'classnames';\nimport style from './style.module.scss';\n\n\nconst Container = ({children, mode, className, ...props}) => {\n    return <div\n        className={classnames(className, 'form-render_container', style['container'], {\n            [style['is-inline-block']]: mode === 'inline-block'\n        })} {...props}>{children}</div>\n};\n\nexport default Container;","import React, {useCallback} from 'react';\nimport _get from \"lodash/get\";\nimport omit from 'lodash/omit';\nimport {getConfig, getComponentMap} from \"./preset\";\nimport classnames from \"classnames\";\nimport Img from \"./components/Img\";\nimport Word from \"./components/Word\";\nimport Container from './components/Container';\nimport Form, {ResetButton, SubmitButton} from \"@kne/react-form-antd\";\nimport {Col, Row} from \"antd\";\n\nconst {fields} = getConfig();\nconst renderFields = Object.assign({}, {Img, Word, Container, Form, SubmitButton, ResetButton, Col, Row}, fields);\nconst ComponentMap = getComponentMap();\n\nconst FormRender = (props) => {\n    const renderChildren = useCallback(({parentId: target, fieldList: data, className}) => {\n        const list = data.filter(({parentId}) => parentId === target);\n        if (list.length === 0) {\n            return null;\n        }\n        return list.map(({id, fieldName, styleProps, props}) => {\n            const Component = renderFields[fieldName];\n\n            const fieldConfig = ComponentMap[fieldName];\n\n            const defaultProps = (() => {\n                const output = {};\n                const schemaProps = _get(fieldConfig, `['propsSchema']['properties']`, {});\n                Object.keys(schemaProps).forEach((name) => {\n                    const item = _get(schemaProps, name);\n                    if (item) {\n                        output[name] = item[\"default\"];\n                    }\n                });\n                return output;\n            })();\n\n            const defaultFormFieldProps = (() => {\n                if (!fields.hasOwnProperty(fieldName)) {\n                    return {};\n                }\n                return {\n                    name: id,\n                    label: fieldConfig.title\n                };\n            })();\n\n            const classNameProps = {\n                [fieldConfig.outerClassName || 'className']: classnames(className, styleProps.className, `id_${id}`)\n            };\n\n            const componentStyleProps = (() => {\n                const props = omit(styleProps, ['className']);\n                if (Object.keys(props).length > 0) {\n                    return {\n                        style: props\n                    };\n                }\n                return {};\n            })();\n\n            const children = renderChildren({\n                parentId: id,\n                fieldList: data\n            });\n\n            const childrenProps = children ? {children} : {};\n\n            const computedProps = Object.assign({}, defaultProps, defaultFormFieldProps, props, classNameProps, componentStyleProps, childrenProps);\n\n            return <Component key={id} {...computedProps}/>\n        });\n    }, []);\n    return renderChildren(props);\n};\n\nexport default FormRender;\n\nexport {default as preset, getConfig, getComponentMap, isFormField} from './preset';","import React, {useCallback} from 'react';\nimport {Space, Row, Col} from \"antd\";\nimport {CloseOutlined} from '@ant-design/icons';\nimport {getConfig} from '../../form-render';\nimport chunk from 'lodash/chunk';\nimport {useAppContext} from \"../context\";\nimport defaultCompositeItems from './composite-items.json';\nimport style from './style.module.scss';\n\n\nconst {componentsConfig} = getConfig();\n\nconst ComponentList = () => {\n    const {compositeItems, saveCompositeItems, delCompositeItem} = useAppContext();\n    const listRender = useCallback(() => {\n        return [...componentsConfig, {\n            title: \"复合组件\",\n            children: defaultCompositeItems.concat(compositeItems.map((item) => Object.assign({}, item, {\n                type: 'Array',\n                isCustom: true\n            })))\n        }].map(({title, children}) => {\n            return <div className={style.con} key={title}>\n                <div className={style['con-title']}>{title}</div>\n                {chunk(children.filter(({hidden}) => hidden !== true), 2).map((item, index) => <Row\n                    className={style['con-item']} gutter={[10, 10]}\n                    key={index}>\n                    {item.map((item) => {\n                        const {title, type = \"String\", children, fieldName, isCustom} = item;\n                        return <Col span={12} key={title}>\n                            <div className={style['con-content']} draggable=\"true\" onDragStart={(e) => {\n                                e.dataTransfer.setData('Text', JSON.stringify({\n                                    type,\n                                    data: type === \"String\" ? fieldName : children\n                                }));\n                            }}>\n                                <div className={style['con-content-inner']}>\n                                    {title}\n                                </div>\n                                {isCustom ? <CloseOutlined className={style['con-close']} onClick={() => {\n                                    delCompositeItem(item);\n                                }}/> : null}\n                            </div>\n                        </Col>;\n                    })}\n                </Row>)}\n            </div>;\n        });\n    }, [compositeItems, saveCompositeItems]);\n    return <Space direction=\"vertical\" style={{width: '100%'}}>\n        {listRender()}\n    </Space>\n};\n\nexport default ComponentList;\n\n\n","import React, {useRef, useMemo} from 'react';\nimport _get from 'lodash/get';\nimport {Button, Space, Row, Col} from 'antd';\nimport {Select, Input, InputNumber, Switch} from '@kne/react-form-antd';\nimport {Group, useFieldInfo} from '@kne/react-form';\nimport {PlusOutlined} from '@ant-design/icons';\nimport style from './style.module.scss';\n\nconst GroupList = Group.GroupList;\nconst useGroup = Group.useGroup;\n\nconst DelButton = () => {\n    const {onRemove} = useGroup();\n    return <Button shape=\"round\" size=\"small\" onClick={onRemove}>删除</Button>\n};\n\n\nconst ItemList = ({name, schema}) => {\n    const items = _get(schema, 'items', {});\n    const groupRef = useRef(null);\n    const children = useMemo(() => {\n        return renderSchemaFormField({name, schema: items});\n    }, [items, name]);\n    return <>\n        <Row justify=\"space-between\">\n            <Col>\n                <span className={style['list-title']}>{schema.title}</span>\n            </Col>\n            <Col>\n                <Button type=\"primary\" shape=\"round\" size=\"small\" icon={<PlusOutlined/>} onClick={() => {\n                    groupRef.current.onAdd();\n                }}/>\n            </Col>\n        </Row>\n        <div className={style['list-con']}>\n            <GroupList ref={groupRef} name={name} groupKey={(item, index) => index}>\n                <Space className={style['list-item']}>\n                    {children}\n                    <DelButton/>\n                </Space>\n            </GroupList>\n        </div>\n    </>\n};\n\nconst AnyOfField = ({name, schema}) => {\n    const fields = useFieldInfo();\n    const current = _get(fields, `[\"${name}_type\"].field.value`);\n    const targetSchema = schema.find((item) => item.type === current);\n    return useMemo(() => {\n        if (!(current && targetSchema)) {\n            return null;\n        }\n        return <div className={style['list-con']}>\n            {renderSchemaFormField({name, schema: targetSchema})}\n        </div>\n    }, [name, current, targetSchema]);\n};\n\nconst AnyOf = ({name, schema}) => {\n    const schemaAnyOf = schema.anyOf;\n    const options = schemaAnyOf.map(({title, type}) => {\n        return {\n            label: title,\n            value: type\n        };\n    })\n    return <>\n        <Row className={style['anyof-title']} justify=\"space-between\">\n            <Col>\n                <span className={style['list-title']}>{schema.title || name}</span>\n            </Col>\n            <Col>\n                <Select size=\"small\" placeholder=\"请选择类型\" name={`${name}_type`} options={options}/>\n            </Col>\n        </Row>\n        <AnyOfField name={name} schema={schemaAnyOf}/>\n    </>\n};\n\nexport const renderSchemaFormField = ({name, schema}) => {\n    switch (schema.type) {\n        case 'string':\n            if (Array.isArray(schema.enum) && schema.enum.length > 0) {\n                return <Select size=\"small\" key={name} name={name} label={schema.title || name}\n                               options={schema.enum.map((str) => ({\n                                   label: str, value: str\n                               }))} defaultValue={schema['default']}/>\n            }\n            return <Input size=\"small\" key={name} type=\"text\" name={name} label={schema.title || name}\n                          defaultValue={schema['default']}/>;\n        case 'boolean':\n            return <Switch size=\"small\" key={name} name={name} label={schema.title || name}\n                           defaultValue={schema['default']}/>\n        case 'number':\n        case 'integer':\n            return <InputNumber size=\"small\" key={name} name={name} label={schema.title || name}\n                                defaultValue={schema['default']}/>\n        case 'object':\n            const properties = _get(schema, 'properties', {});\n            return Object.keys(properties).map((name) => {\n                return renderSchemaFormField({name, schema: properties[name]});\n            });\n        case 'array':\n            return <ItemList key={name} name={name} schema={schema}/>\n        default:\n            if (schema.anyOf) {\n                return <AnyOf key={name} name={name} schema={schema}/>\n            }\n            return null;\n    }\n};","import React, {useCallback, useMemo} from 'react';\nimport {useAppContext} from \"../context\";\nimport findLastIndex from 'lodash/findLastIndex';\nimport findIndex from 'lodash/findIndex';\nimport {FormModal, Input} from '@kne/react-form-antd';\n\n\nconst useFieldOperation = () => {\n    const {setFieldList, fieldList, activeId, setActiveId, saveCompositeItems, compositeItems} = useAppContext();\n    const toSuper = useCallback(() => {\n        if (!activeId || activeId === 'root') {\n            return;\n        }\n        setActiveId((activeId) => {\n            const item = fieldList.find((item) => item.id === activeId);\n            if (item && item.parentId) {\n                return item.parentId;\n            }\n            return activeId;\n        });\n    }, [activeId, setActiveId, fieldList]);\n    const toRoot = useCallback(() => {\n        setActiveId('root');\n    }, [setActiveId]);\n    const toFirstChild = useCallback(() => {\n        if (!activeId) {\n            return;\n        }\n        setActiveId((activeId) => {\n            const item = fieldList.find((item) => item.parentId === activeId);\n            if (item) {\n                return item.id;\n            }\n            return activeId;\n        });\n    }, [activeId, setActiveId, fieldList]);\n    const up = useCallback(() => {\n        if (!activeId || activeId === 'root') {\n            return;\n        }\n        setFieldList((oldList) => {\n            const list = oldList.slice(0);\n            const index = list.findIndex((item) => item.id === activeId);\n            const targetIndex = findLastIndex(list.slice(0, index), (item) => item.parentId === list[index].parentId);\n            if (index > -1 && targetIndex > -1) {\n                const targetItem = list[targetIndex];\n                list[targetIndex] = list[index];\n                list[index] = targetItem;\n            }\n            return list;\n        });\n    }, [activeId, setFieldList]);\n    const down = useCallback(() => {\n        if (!activeId || activeId === 'root') {\n            return;\n        }\n        setFieldList((oldList) => {\n            const list = oldList.slice(0);\n            const index = list.findIndex((item) => item.id === activeId);\n            const targetIndex = findIndex(list.slice(index + 1), (item) => item.parentId === list[index].parentId);\n            if (index > -1 && targetIndex > -1) {\n                const item = list[index];\n                list.splice(index, 1);\n                list.splice(index + 1, 0, item);\n            }\n\n            return list;\n        });\n    }, [activeId, setFieldList]);\n    const del = useCallback(() => {\n        if (!activeId || activeId === 'root') {\n            return;\n        }\n        setActiveId(null);\n\n        setFieldList((oldList) => {\n            const list = oldList.slice(0);\n            const index = list.findIndex((item) => item.id === activeId);\n            const removeChildren = (id) => {\n                const childrenList = list.filter((item) => item.parentId === id);\n                childrenList.forEach((item) => {\n                    list.splice(list.indexOf(item), 1);\n                    removeChildren(item.id);\n                });\n            };\n            if (index > -1) {\n                list.splice(index, 1);\n                removeChildren(activeId);\n            }\n            return list;\n        });\n    }, [activeId, setActiveId, setFieldList]);\n    const save = useCallback(() => {\n        const modal = FormModal.modal({\n            title: '请输入组件名',\n            content: <Input name=\"fieldName\" label=\"组件名\" rule=\"REQ LEN-0-10 NO_REACT\"/>,\n            formProps: {\n                rules: {\n                    'NO_REACT': (value) => {\n                        if (!!compositeItems.find((item) => item.title === value)) {\n                            return {result: false, msg: \"%s不能跟已有组件重复\"};\n                        }\n                        return {result: true};\n                    }\n                },\n                onSubmit: (data) => {\n                    const targetList = [];\n                    const findChildren = (id, depth) => {\n                        const current = fieldList.find((item) => item.id === id);\n                        const children = fieldList.filter((item) => item.parentId === id);\n                        targetList.push(Object.assign({}, current, {depth}));\n                        if (children.length > 0) {\n                            children.forEach((item) => {\n                                findChildren(item.id, depth + 1);\n                            });\n                        }\n                    };\n                    findChildren(activeId, 1);\n                    const targetIndex = targetList.findIndex(({id}) => id === activeId);\n                    targetList[targetIndex].parentId = 'root';\n                    saveCompositeItems({\n                        title: data.fieldName,\n                        children: targetList\n                    });\n                    modal.destroy();\n                }\n            }\n        });\n    }, [activeId, fieldList, compositeItems, saveCompositeItems]);\n    return useMemo(() => ({\n        toRoot,\n        toSuper,\n        toFirstChild,\n        up,\n        down,\n        del,\n        save\n    }), [toRoot, toSuper, toFirstChild, up, down, del, save]);\n};\n\nexport default useFieldOperation;","import React, {useRef, useEffect, useMemo} from 'react';\nimport {useAppContext} from '../context';\nimport _get from 'lodash/get';\nimport {getConfig, getComponentMap} from '../../form-render';\nimport {renderSchemaFormField} from './SchemaForm';\nimport Form from '@kne/react-form-antd';\nimport {Tabs, Space, Button, Empty} from 'antd';\nimport useFieldOperation from '../WorkArea/useFieldOperation';\nimport {EnterOutlined, ArrowUpOutlined, ArrowDownOutlined, DeleteOutlined, SaveOutlined} from '@ant-design/icons';\nimport formConfig from '../form-config.json';\nimport commonStyleConfig from '../common-style.json';\nimport style from './style.module.scss';\n\nconst {fields} = getConfig();\nconst ComponentMap = getComponentMap();\nconst {TabPane} = Tabs;\n\nconst useFormData = (schema, propsName = 'props') => {\n    const {fieldList, setFieldList, activeId} = useAppContext();\n    const formRef = useRef(null);\n    useEffect(() => {\n        let sub, sub2;\n        if (activeId) {\n            const activeItem = fieldList.find((item) => item.id === activeId);\n            const schemaProperties = _get(schema, 'properties', {});\n            const defaultProps = {};\n            Object.keys(schemaProperties).forEach((name) => {\n                defaultProps[name] = schemaProperties[name]['default'];\n            });\n            if (activeItem && formRef.current) {\n                formRef.current.data = Object.assign({}, defaultProps, {\n                    name: activeItem.id,\n                    label: ComponentMap[activeItem.fieldName].title\n                }, formRef.current.data, _get(activeItem, propsName));\n            }\n            sub = formRef.current.emitter.addListener('form-field-validate-complete', ({name, index: SymbolIndex, value}) => {\n                setFieldList((fieldList) => {\n                    const activeItem = fieldList.find((item) => item.id === activeId);\n                    const index = fieldList.indexOf(activeItem);\n                    const newItem = Object.assign({}, activeItem, {\n                        [propsName]: Object.assign({}, activeItem[propsName], (() => {\n                            const fieldItem = _get(formRef.current.formState, `${name}.data`, {})[SymbolIndex];\n                            if (fieldItem.groupName && name === fieldItem.groupName) {\n                                const fieldValue = _get(formRef.current.data, `${fieldItem.groupName}`, []);\n                                const target = fieldValue.slice(0);\n                                target[fieldItem.index] = value;\n                                return {[fieldItem.groupName]: target};\n                            }\n                            if (fieldItem.groupName) {\n                                const fieldValue = _get(formRef.current.data, `${fieldItem.groupName}`, []);\n                                const target = fieldValue.slice(0);\n                                target[fieldItem.index] = Object.assign({}, target[fieldItem.index], {[name]: value});\n                                return {[fieldItem.groupName]: target};\n                            }\n                            return {[name]: value};\n                        })())\n                    });\n\n                    const newFieldList = fieldList.slice(0);\n                    newFieldList.splice(index, 1, newItem);\n                    setFieldList(newFieldList);\n                });\n            });\n\n            sub2 = formRef.current.emitter.addListener('form-group-remove', ({index: groupIndex, name}) => {\n                setFieldList((fieldList) => {\n                    const activeItem = fieldList.find((item) => item.id === activeId);\n                    const index = fieldList.indexOf(activeItem);\n                    const newItem = Object.assign({}, activeItem, {\n                        [propsName]: Object.assign({}, activeItem[propsName], (() => {\n                            const fieldValue = _get(formRef.current.data, `${name}`) || [];\n                            const target = fieldValue.slice(0);\n                            target.splice(groupIndex, 1);\n                            return {[name]: target};\n                        })())\n                    });\n\n                    const newFieldList = fieldList.slice(0);\n                    newFieldList.splice(index, 1, newItem);\n                    setFieldList(newFieldList);\n                });\n            });\n        }\n        return () => {\n            sub && sub.remove();\n            sub2 && sub2.remove();\n        };\n    }, [fieldList, schema, propsName, activeId, setFieldList]);\n    return formRef;\n};\n\nconst FieldOptions = () => {\n    const {fieldList, activeId} = useAppContext();\n    const schema = useMemo(() => {\n        const activeItem = fieldList.find((item) => item.id === activeId);\n        return _get(ComponentMap, `[\"${_get(activeItem, 'fieldName')}\"].propsSchema`, {});\n    }, [fieldList, activeId]);\n    const formRef = useFormData(schema);\n    return <Form ref={formRef} type=\"inner\" size=\"small\">\n        {Object.keys(_get(schema, 'properties', {})).length === 0 ?\n            <Empty description=\"\"/> : renderSchemaFormField({schema})}\n    </Form>\n};\n\nconst FormOptions = () => {\n    const formRef = useFormData(formConfig);\n    return <Form ref={formRef} type=\"inner\" size=\"small\">\n        {renderSchemaFormField({schema: formConfig})}\n    </Form>\n};\n\nconst StyleOptions = () => {\n    const {fieldList, activeId} = useAppContext();\n    const schema = useMemo(() => {\n        const activeItem = fieldList.find((item) => item.id === activeId);\n        return Object.assign({}, commonStyleConfig, _get(ComponentMap, `[\"${_get(activeItem, 'fieldName')}\"].stylePropsSchema`, {}));\n    }, [fieldList, activeId]);\n    const formRef = useFormData(schema, 'styleProps');\n    return <Form ref={formRef} type=\"inner\" size=\"small\">\n        {renderSchemaFormField({schema})}\n    </Form>\n};\n\nconst Panel = () => {\n    const {fieldList, activeId} = useAppContext();\n    const item = useMemo(() => fieldList.find((item) => item.id === activeId), [fieldList, activeId]);\n    const fieldOperation = useFieldOperation();\n    if (!item) {\n        return null;\n    }\n    return <Space className={style['panel']} direction={'vertical'} style={{width: '100%'}}>\n        <Space className={style['active-info']}>\n            ID:{activeId} 类型:{ComponentMap[item.fieldName].title} {item.parentId ? <>父级ID:{item.parentId}</> : null}\n        </Space>\n        <Space className={style['active-opt']}>\n            <span>操作:</span>\n            <span>\n                {item.id === 'root' ?\n                    <Button type=\"link\" icon={<EnterOutlined rotate={-90}/>}\n                            onClick={fieldOperation.toFirstChild}/> : <>\n                        <Button type=\"link\" icon={<EnterOutlined rotate={90}/>} onClick={fieldOperation.toSuper}/>\n                        <Button type=\"link\" icon={<EnterOutlined rotate={-90}/>} onClick={fieldOperation.toFirstChild}/>\n                        <Button type=\"link\" icon={<ArrowUpOutlined/>} onClick={fieldOperation.up}/>\n                        <Button type=\"link\" icon={<ArrowDownOutlined/>} onClick={fieldOperation.down}/>\n                        <Button type=\"link\" icon={<DeleteOutlined/>} onClick={fieldOperation.del}/>\n                        <Button type=\"link\" icon={<SaveOutlined/>} onClick={fieldOperation.save}/>\n                    </>}\n            </span>\n        </Space>\n    </Space>\n};\n\nconst OptionList = () => {\n    const {activeId, fieldList} = useAppContext();\n    const isField = useMemo(() => {\n        const activeItem = fieldList.find((item) => item.id === activeId);\n        if (!activeItem) {\n            return false;\n        }\n        return fields.hasOwnProperty(activeItem.fieldName);\n    }, [activeId, fieldList]);\n    if (!activeId) {\n        return null;\n    }\n    return (\n        <Space direction={'vertical'} style={{width: '100%'}}>\n            <Panel/>\n            <Tabs className={style['con']} defaultActiveKey=\"1\">\n                <TabPane tab=\"组件属性\" key=\"1\" forceRender>\n                    <FieldOptions/>\n                </TabPane>\n                {isField ? <TabPane tab=\"表单属性\" key=\"2\" forceRender>\n                    <FormOptions/>\n                </TabPane> : null}\n                <TabPane tab=\"样式属性\" key=\"3\" forceRender>\n                    <StyleOptions/>\n                </TabPane>\n            </Tabs>\n        </Space>\n    );\n};\n\nexport default OptionList;","import React, {useState, useEffect, useCallback, useMemo, useRef} from 'react';\nimport {useAppContext} from \"../context\";\nimport useFieldOperation from \"./useFieldOperation\";\nimport classnames from \"classnames\";\nimport style from \"./style.module.scss\";\nimport {getComponentMap, isFormField} from \"../../form-render\";\nimport uniqueId from \"lodash/uniqueId\";\nimport ResizeObserver from 'rc-resize-observer';\nimport {ArrowDownOutlined, ArrowUpOutlined, DeleteOutlined, EnterOutlined, SaveOutlined} from \"@ant-design/icons\";\n\nconst ComponentMap = getComponentMap();\n\nconst ActiveObject = ({open, children}) => {\n    const {fieldList, setFieldList, activeId, setActiveId} = useAppContext();\n    const outerRef = useRef(null);\n    const [targetList, setTargetList] = useState([]);\n    const fieldOperation = useFieldOperation();\n    useEffect(() => {\n        const handler = (e) => {\n            if (e.target !== document.body) {\n                return;\n            }\n            if (activeId) {\n                if (e.keyCode === 13) {\n                    e.preventDefault();\n                    fieldOperation.toRoot();\n                }\n                if (e.keyCode === 37) {\n                    e.preventDefault();\n                    fieldOperation.toSuper();\n                }\n                if (e.keyCode === 38) {\n                    e.preventDefault();\n                    fieldOperation.up();\n                }\n                if (e.keyCode === 39) {\n                    e.preventDefault();\n                    fieldOperation.toFirstChild();\n                }\n                if (e.keyCode === 40) {\n                    e.preventDefault();\n                    fieldOperation.down();\n                }\n\n                if (e.keyCode === 8) {\n                    e.preventDefault();\n                    fieldOperation.del();\n                }\n            }\n        };\n        document.addEventListener('keydown', handler);\n        return () => {\n            document.removeEventListener('keydown', handler);\n        };\n    }, [activeId, fieldOperation]);\n    const currentActive = useMemo(() => {\n        if (!activeId) {\n            return;\n        }\n        return targetList.find((item) => item.id === activeId);\n    }, [activeId, targetList]);\n    const computedTargetList = useCallback(() => {\n        const outer = outerRef.current;\n        const outerRect = outer.getBoundingClientRect();\n        const left = outerRect.left + document.documentElement.scrollLeft;\n        const top = outerRect.top + document.documentElement.scrollTop;\n        const output = fieldList.slice(0).sort((a, b) => {\n            return b.depth - a.depth\n        }).map(({id, depth, fieldName}) => {\n            const targetDom = outer.querySelector(`.id_${id}`);\n            const rect = targetDom.getBoundingClientRect();\n            const targetRect = {\n                left: rect.left + document.documentElement.scrollLeft,\n                top: rect.top + document.documentElement.scrollTop,\n                width: rect.width,\n                height: rect.height\n            };\n            return {\n                id,\n                fieldName,\n                title: ComponentMap[fieldName].title,\n                depth,\n                top: Math.round(targetRect.top - top),\n                left: Math.round(targetRect.left - left),\n                width: Math.round(targetRect.width),\n                height: Math.round(targetRect.height),\n                outer: {left, top, width: outerRect.width, height: outerRect.height}\n            };\n        });\n        setTargetList(output);\n    }, [fieldList]);\n\n    const findTarget = useCallback((e, childCheck = false) => {\n        return targetList.find(({fieldName, left, top, width, height, outer}) => {\n            const clickLeft = e.clientX + document.documentElement.scrollLeft - outer.left,\n                clickTop = e.clientY + document.documentElement.scrollTop - outer.top;\n            return clickLeft > left && clickLeft < left + width && clickTop > top && clickTop < top + height && (!childCheck || ComponentMap[fieldName].hasChildNodes);\n        });\n    }, [targetList]);\n    useEffect(() => {\n        computedTargetList();\n    }, [computedTargetList]);\n    return <ResizeObserver onResize={() => {\n        computedTargetList();\n    }}>\n        <div className={classnames(style['form-outer'], {\n            [style['is-open']]: open\n        })} ref={outerRef}>\n            {children}\n            {open ? <div className={style['active-area']} onClick={(e) => {\n                e.preventDefault();\n                const target = findTarget(e);\n                if (target) {\n                    if (target.id === activeId) {\n                        setActiveId(null);\n                        return;\n                    }\n                    setActiveId(target.id);\n                }\n            }} onDragOver={(e) => {\n                e.preventDefault();\n            }} onDrop={(e) => {\n                const target = findTarget(e, true);\n                if (target && ComponentMap[target.fieldName].hasChildNodes === true) {\n                    e.stopPropagation();\n                    const transferData = JSON.parse(e.dataTransfer.getData(\"Text\"));\n                    if (transferData.type === 'String') {\n                        const fieldName = transferData.data;\n                        const newId = uniqueId(`${fieldName}_`);\n                        setFieldList((oldData) => [...oldData, {\n                            id: newId,\n                            parentId: target.id,\n                            fieldName,\n                            depth: target.depth + 1,\n                            props: isFormField(fieldName) ? {\n                                label: ComponentMap[fieldName].title,\n                                name: newId\n                            } : {},\n                            styleProps: {}\n                        }]);\n                    } else {\n                        const idsMap = {};\n                        transferData.data.forEach((item) => {\n                            idsMap[item.id] = uniqueId(`${item.fieldName}_`);\n                        });\n                        setFieldList((oldData) => [...oldData, ...transferData.data.map((item) => {\n                            if (item.parentId === 'root') {\n                                item.parentId = target.id;\n                                item.depth = target.depth + 1;\n                            } else {\n                                item.parentId = idsMap[item.parentId];\n                                item.depth = item.depth + target.depth;\n                            }\n                            item.id = idsMap[item.id];\n                            return item;\n                        })]);\n                    }\n                }\n            }}>\n                {activeId && currentActive ? <div className={classnames(style['active'])} style={{\n                    top: currentActive.top,\n                    left: currentActive.left,\n                    width: currentActive.width,\n                    height: currentActive.height\n                }}>\n                <span\n                    className={style['tip']}>{currentActive.title}</span>\n                    <span className={style['edit']}>{(currentActive.id === 'root' ?\n                        <EnterOutlined rotate={-90} className={style['opt-btn']} onClick={(e) => {\n                            e.stopPropagation();\n                            fieldOperation.toFirstChild();\n                        }}/> : <>\n                            <EnterOutlined rotate={90} className={style['opt-btn']} onClick={(e) => {\n                                e.stopPropagation();\n                                fieldOperation.toSuper();\n                            }}/>\n                            <EnterOutlined rotate={-90} className={style['opt-btn']} onClick={(e) => {\n                                e.stopPropagation();\n                                fieldOperation.toFirstChild();\n                            }}/>\n                            <ArrowUpOutlined className={style['opt-btn']} onClick={(e) => {\n                                e.stopPropagation();\n                                fieldOperation.up();\n                            }}/>\n                            <ArrowDownOutlined className={style['opt-btn']} onClick={(e) => {\n                                e.stopPropagation();\n                                fieldOperation.down();\n                            }}/>\n                            <DeleteOutlined className={style['opt-btn']} onClick={(e) => {\n                                e.stopPropagation();\n                                fieldOperation.del();\n                            }}/>\n                            <SaveOutlined className={style['opt-btn']} onClick={(e) => {\n                                e.stopPropagation();\n                                fieldOperation.save();\n                            }}/>\n                        </>)}</span>\n                </div> : null}\n            </div> : null}\n        </div>\n    </ResizeObserver>\n};\n\nexport default ActiveObject;","import React, {useEffect, useState} from 'react';\nimport FormRender from '../../form-render';\nimport {Switch, Space, Button, Row, Col} from 'antd';\nimport {useAppContext} from '../context';\nimport style from './style.module.scss';\nimport ActiveObject from \"./ActiveObject\";\n\nconst WorkArea = () => {\n    const {fieldList, setFieldList, setActiveId, exportData, includeData} = useAppContext();\n    const [open, setOpen] = useState(true);\n    useEffect(() => {\n        setFieldList([{\n            id: 'root',\n            fieldName: 'Form',\n            depth: 0,\n            props: {\n                onSubmit: (data) => {\n                    console.log(data);\n                }\n            },\n            styleProps: {}\n        }]);\n    }, [setFieldList]);\n    return <div className={style['con']}>\n        <div className={style['header']}>\n            <Row justify=\"space-between\">\n                <Col>\n                    <Space>\n                        <span>预览模式:</span><Switch checked={!open} onChange={(value) => {\n                        setActiveId(null);\n                        setOpen(!value);\n                    }}/>\n                    </Space>\n                </Col>\n                <Col>\n                    <Space>\n                        <Button shape=\"round\" type=\"primary\" size=\"small\" onClick={() => {\n                            includeData().then((list) => {\n                                list && list.length > 0 && setFieldList(list);\n                            });\n                        }}>导入</Button>\n                        <Button shape=\"round\" size=\"small\" onClick={() => {\n                            exportData(JSON.stringify(fieldList));\n                        }}>导出</Button>\n                    </Space>\n                </Col>\n            </Row>\n        </div>\n        <ActiveObject open={open}>\n            <FormRender fieldList={fieldList} className={style['form']}/>\n        </ActiveObject>\n    </div>\n};\n\nexport default WorkArea;","import React, {useState} from 'react';\nimport Layout from './Layout';\nimport {Provider} from './context';\nimport ComponentList from './ComponentList';\nimport OptionList from './OptionList';\nimport {FormModal, TextArea} from '@kne/react-form-antd';\nimport {Modal, Input} from 'antd';\nimport WorkArea from './WorkArea';\n\nconst FormGenerator = ({compositeItems, exportData, includeData, saveCompositeItems, delCompositeItem}) => {\n    const [fieldList, setFieldList] = useState([]);\n    const [activeId, setActiveId] = useState(null);\n    return <Provider\n        value={{\n            activeId,\n            setActiveId,\n            fieldList,\n            setFieldList,\n            exportData,\n            includeData,\n            compositeItems,\n            saveCompositeItems,\n            delCompositeItem\n        }}>\n        <Layout left={<ComponentList/>} right={<OptionList/>}>\n            <WorkArea/>\n        </Layout>\n    </Provider>\n};\n\nFormGenerator.defaultProps = {\n    compositeItems: [],\n    includeData: () => {\n        return new Promise((resolve) => {\n            const modal = FormModal.modal({\n                title: '导入数据',\n                content: <TextArea name=\"data\" label=\"导入数据\" rule=\"REQ IS_JSON\"/>,\n                formProps: {\n                    rules: {\n                        IS_JSON: (data) => {\n                            try {\n                                JSON.parse(data);\n                                return {result: true};\n                            } catch (e) {\n                                return {result: false, errMsg: '%s必须为符合JSON格式'};\n                            }\n                        }\n                    },\n                    onSubmit({data}) {\n                        resolve(JSON.parse(data));\n                        modal.destroy();\n                    }\n                },\n                onCancel() {\n                    resolve([]);\n                }\n            });\n        });\n    },\n    exportData: (data) => {\n        Modal.info({\n            title: \"导出数据\",\n            content: <Input.TextArea value={data} readOnly rows={4}/>,\n            okText: \"确定\"\n        });\n    },\n    saveCompositeItems: () => {\n        console.warn('请实现[saveCompositeItems]方法，存储复合组件');\n    },\n    delCompositeItem: () => {\n        console.warn('请实现[delCompositeItem]方法，存储复合组件');\n    }\n};\n\nexport default FormGenerator;\n\nexport {preset} from '../form-render';","import React, {useState} from 'react';\nimport FormGenerator from './form-generator';\nimport 'antd/dist/antd.css';\n\nconst getCompositeItems = () => JSON.parse(window.localStorage.getItem('composite_items') || '[]');\n\nconst getUUId = () => {\n    const nextUUId = (window.localStorage.getItem('composite_uuid_creator') || 0) + 1;\n    window.localStorage.setItem('composite_uuid_creator', nextUUId);\n    return nextUUId;\n};\n\nconst App = () => {\n    const [list, setList] = useState(getCompositeItems);\n    return <FormGenerator compositeItems={list} saveCompositeItems={(item) => {\n        setList((oldList) => {\n            item.id = getUUId();\n            const newList = oldList.concat(item);\n            window.localStorage.setItem('composite_items', JSON.stringify(newList));\n            return newList;\n        });\n    }} delCompositeItem={({title}) => {\n        setList((oldList) => {\n            const index = oldList.findIndex((item) => item.title === title);\n            const newList = oldList.slice(0);\n            newList.splice(index, 1);\n            window.localStorage.setItem('composite_items', JSON.stringify(newList));\n            return newList;\n        });\n    }}/>\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createContext, useContext } from 'react';\n\nconst context = createContext({});\n\nexport default context;\nexport const { Provider, Consumer } = context;\nexport const useFormContext = () => useContext(context);\n","import { useFormContext } from './context';\n\nconst useEmitter = () => {\n  const { emitter } = useFormContext();\n  return emitter;\n};\n\nexport default useEmitter;\n","import { useRef, useMemo } from 'react';\nimport fbemitter from 'fbemitter';\n\nconst { EventEmitter } = fbemitter;\n\nclass FormEventEmitter extends EventEmitter {\n  constructor(debug) {\n    super();\n    this.debug = debug;\n  }\n\n  emit(...args) {\n    if (this.debug) {\n      console.log('[react-form][debug]:', ...args);\n    }\n    super.emit(...args);\n  }\n}\n\nconst useEvent = debug => {\n  const debugRef = useRef(debug);\n  return useMemo(() => {\n    const emitter = new FormEventEmitter(debugRef.current);\n    return {\n      addListener: (...args) => emitter.addListener(...args),\n      emit: (...args) => emitter.emit(...args),\n      removeAllListeners: (...args) => emitter.removeAllListeners(...args),\n      listeners: (...args) => emitter.listeners(...args),\n      once: (...args) => emitter.once(...args)\n    };\n  }, []);\n};\n\nexport default useEvent;\n","import React, { createContext, useContext, useEffect, useImperativeHandle, useState, useCallback, forwardRef } from 'react';\nimport useEmitter from './useEmitter';\nimport { useFormContext } from './context';\nimport range from 'lodash/range';\nimport uniqueId from 'lodash/uniqueId';\nimport get from '@babel/runtime/helpers/esm/get';\n\nconst context = createContext();\n\nconst { Provider } = context;\n\nexport const useGroup = () => {\n  return useContext(context);\n};\n\nexport const GroupList = forwardRef(({ name, groupKey, children }, ref) => {\n  const [list, setList] = useState([]);\n  const emitter = useEmitter();\n  const { initDataRef } = useFormContext();\n\n  const createGroupIndex = useCallback(() => {\n    return uniqueId(`group_${name}_`);\n  }, [name]);\n\n  const setGroupList = useCallback(\n    list => {\n      return Array.isArray(list) && setList(groupKey ? list.map(groupKey) : range(0, list.length).map(() => createGroupIndex()));\n    },\n    [groupKey, createGroupIndex]\n  );\n\n  useEffect(() => {\n    initDataRef.current && setGroupList(get(initDataRef.current, name));\n  }, [setGroupList,initDataRef, name]);\n\n  useEffect(() => {\n    const sub1 = emitter.addListener('form-data-reset', () => {\n      setList([]);\n    });\n    const sub2 = emitter.addListener('form-data-set', ({ data }) => {\n      setGroupList(get(data, name));\n    });\n\n    return () => {\n      sub1 && sub1.remove();\n      sub2 && sub2.remove();\n    };\n  }, [emitter,name, setGroupList]);\n\n  const addHandler = useCallback(() => {\n    setList(oldList => {\n      const newList = oldList.slice(0);\n      newList.push(createGroupIndex());\n      emitter.emit('form-group-add', { index: newList.length - 1, name });\n      return newList;\n    });\n  }, [createGroupIndex, emitter, name]);\n\n  const removeHandler = useCallback(\n    index => {\n      setList(oldList => {\n        const newList = oldList.slice(0);\n        const targetIndex = newList.indexOf(index);\n        newList.splice(targetIndex, 1);\n        emitter.emit('form-group-remove', { index: targetIndex, name });\n        return newList;\n      });\n    },\n    [name, emitter]\n  );\n\n  useImperativeHandle(\n    ref,\n    () => {\n      return {\n        onAdd: addHandler,\n        onRemove: removeHandler\n      };\n    },\n    [addHandler, removeHandler]\n  );\n\n  return list.map(id => {\n    return (\n      <Group\n        name={name}\n        key={id}\n        onAdd={addHandler}\n        onRemove={() => {\n          removeHandler(id);\n        }}>\n        {children}\n      </Group>\n    );\n  });\n});\n\nconst Group = ({ name, index, onAdd, onRemove, children }) => {\n  return <Provider value={{ name, index, onAdd, onRemove }}>{children}</Provider>;\n};\n\nGroup.useGroup = useGroup;\nGroup.GroupList = GroupList;\n\nexport default Group;\n","import React, {useRef,useEffect} from 'react';\nimport Form, {useField, Group, useSubmit} from '../react-form';\n\nconst {useGroup, GroupList} = Group;\n\nconst Input = (props) => {\n    const {value, label, errMsg, errState, triggerValidate, onChange} = useField(props);\n    return <div>{label}:<input type=\"text\" value={value||''} onChange={onChange}\n                               onBlur={triggerValidate}/>{errState}{errMsg}</div>\n};\n\nconst DelButton = (props) => {\n    const {onRemove} = useGroup();\n    return <button onClick={onRemove}>删除</button>\n};\n\nconst SubmitButton = ({children}) => {\n    const {isPass, isLoading, ...submitProps} = useSubmit();\n    return <button {...submitProps}>{children}({isPass}-{isLoading})</button>\n};\n\nexport default () => {\n    const formRef = useRef(null);\n    const ref = useRef(null);\n    useEffect(()=>{\n        setTimeout(()=>{\n            formRef.current.data = {name:['linzp1','linzp2']};\n        },1000);\n    },[]);\n    return <Form\n        debug\n        ref={formRef}\n        onSubmit={(data) => {\n            console.log(JSON.stringify(data));\n        }}>\n        <button onClick={() => {\n            ref.current.onAdd();\n        }}>添加\n        </button>\n        <GroupList name=\"name\" ref={ref}>\n            <Input name=\"name\" label=\"名称\" rule=\"REQ\"/>\n            <DelButton/>\n        </GroupList>\n        <div>\n            <SubmitButton>提交</SubmitButton>\n        </div>\n    </Form>\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport Test from './test/index';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"con\":\"style_con__IybYg\",\"panel\":\"style_panel__qkWSo\",\"active-opt\":\"style_active-opt__14jev\",\"active-info\":\"style_active-info__2fs2B\",\"list-item\":\"style_list-item__2X6U5\",\"list-title\":\"style_list-title__1gVpp\",\"list-con\":\"style_list-con__1KKWr\",\"anyof-title\":\"style_anyof-title__2Xtgx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"con\":\"style_con__1zOJ7\",\"con-title\":\"style_con-title__1tr5X\",\"con-item\":\"style_con-item__1LcNt\",\"con-content\":\"style_con-content__2IEkT\",\"con-content-inner\":\"style_con-content-inner__x4oZW\",\"con-close\":\"style_con-close__37Tgy\"};"],"sourceRoot":""}